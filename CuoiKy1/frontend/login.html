<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Login</title>
</head>
<body style="font-family:sans-serif">

<h2>ğŸ” ÄÄƒng nháº­p</h2>

<input id="u" placeholder="Username"><br><br>
<button onclick="login()">Login</button>

<script>
let ws = new WebSocket("ws://localhost:8765");

function login(){
    const u = document.getElementById("u").value.trim();
    if(!u){
        alert("Nháº­p username");
        return;
    }

    ws.send(JSON.stringify({
        type:"login",
        username: u,
        room: "general"
    }));
}

ws.onmessage = e=>{
    const d = JSON.parse(e.data);
    if(d.type === "login_success"){
        localStorage.setItem("username", d.username);
        localStorage.setItem("room", d.room);
        location = "chat.html";
    }
};
</script>

</body>
</html>
